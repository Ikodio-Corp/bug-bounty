# Staging Environment Configuration

# Application
APP_NAME=IKODIO-BugBounty-Staging
APP_ENV=staging
DEBUG=false
SECRET_KEY=staging-secret-key
API_V1_PREFIX=/api
ALLOWED_HOSTS=staging.ikodio.com

# Server
HOST=0.0.0.0
PORT=8000
WORKERS=2
WORKER_CLASS=uvicorn.workers.UvicornWorker
RELOAD=false

# Database
DATABASE_URL=postgresql+asyncpg://ikodio_staging:staging-password@postgres-staging.internal:5432/ikodio_staging
DATABASE_POOL_SIZE=20
DATABASE_MAX_OVERFLOW=40
DATABASE_POOL_TIMEOUT=30
DATABASE_POOL_RECYCLE=3600

# Database Sharding
ENABLE_SHARDING=true
DATABASE_URL_SHARD_0=postgresql+asyncpg://ikodio_staging:staging-password@postgres-shard-0.internal:5432/ikodio_shard_0_staging
DATABASE_URL_SHARD_1=postgresql+asyncpg://ikodio_staging:staging-password@postgres-shard-1.internal:5432/ikodio_shard_1_staging
DATABASE_URL_SHARD_2=postgresql+asyncpg://ikodio_staging:staging-password@postgres-shard-2.internal:5432/ikodio_shard_2_staging

# Redis
REDIS_URL=redis://redis-staging.internal:6379/0
REDIS_PASSWORD=staging-redis-password
REDIS_MAX_CONNECTIONS=50
REDIS_DECODE_RESPONSES=true

# Celery
CELERY_BROKER_URL=redis://redis-staging.internal:6379/1
CELERY_RESULT_BACKEND=redis://redis-staging.internal:6379/2
CELERY_WORKER_PREFETCH_MULTIPLIER=2
CELERY_WORKER_MAX_TASKS_PER_CHILD=500

# JWT Authentication
JWT_SECRET_KEY=staging-jwt-secret
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=120
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7

# Security
CORS_ORIGINS=https://staging.ikodio.com
CORS_ALLOW_CREDENTIALS=true
CORS_ALLOW_METHODS=GET,POST,PUT,PATCH,DELETE,OPTIONS
CORS_ALLOW_HEADERS=*

# Rate Limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_PER_MINUTE=120
RATE_LIMIT_BURST=200

# Email
SMTP_HOST=smtp.mailtrap.io
SMTP_PORT=587
SMTP_USER=your-mailtrap-user
SMTP_PASSWORD=your-mailtrap-password
SMTP_FROM=staging@ikodio.com
SMTP_FROM_NAME=IKODIO Staging

# Payment
STRIPE_SECRET_KEY=sk_test_your-stripe-test-key
STRIPE_PUBLISHABLE_KEY=pk_test_your-stripe-test-key
STRIPE_WEBHOOK_SECRET=whsec_test_your-webhook-secret

# AWS
AWS_ACCESS_KEY_ID=your-aws-access-key
AWS_SECRET_ACCESS_KEY=your-aws-secret-key
AWS_REGION=us-east-1
AWS_S3_BUCKET=ikodio-staging-uploads

# Monitoring
SENTRY_DSN=https://your-sentry-dsn@sentry.io/staging-project-id
GRAFANA_URL=https://grafana-staging.ikodio.com
GRAFANA_USERNAME=admin
GRAFANA_PASSWORD=staging-password
PROMETHEUS_URL=http://prometheus-staging.internal:9090

# Logging
LOG_LEVEL=DEBUG
LOG_FORMAT=json
LOG_FILE=/var/log/ikodio/staging.log
LOG_MAX_SIZE=50MB
LOG_BACKUP_COUNT=5

# Feature Flags
ENABLE_AI_AGENTS=true
ENABLE_UNIVERSITY=true
ENABLE_GEOPOLITICAL=true
ENABLE_MARKETPLACE=true
ENABLE_GUILD=true

# External Services
BURP_API_URL=https://burp-staging.internal:8080
BURP_API_KEY=staging-burp-key
ZAP_API_URL=https://zap-staging.internal:8080
ZAP_API_KEY=staging-zap-key
NUCLEI_BINARY_PATH=/usr/local/bin/nuclei

# PWA
NEXT_PUBLIC_VAPID_PUBLIC_KEY=staging-vapid-public-key
VAPID_PRIVATE_KEY=staging-vapid-private-key

# GitHub Integration
GITHUB_CLIENT_ID=staging-github-client-id
GITHUB_CLIENT_SECRET=staging-github-client-secret

# OAuth
GOOGLE_CLIENT_ID=staging-google-client-id
GOOGLE_CLIENT_SECRET=staging-google-client-secret

# SSL/TLS
SSL_CERT_PATH=/etc/ssl/certs/staging.ikodio.crt
SSL_KEY_PATH=/etc/ssl/private/staging.ikodio.key
SSL_CA_BUNDLE=/etc/ssl/certs/ca-bundle.crt
